"use strict";(self.webpackChunkdocu=self.webpackChunkdocu||[]).push([[80913],{95698:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var n=a(87462),r=(a(67294),a(3905));const i={},o="Iceberg",l={unversionedId:"integrations/destinations/iceberg",id:"integrations/destinations/iceberg",title:"Iceberg",description:"This page guides you through the process of setting up the Iceberg destination connector.",source:"@site/../docs/integrations/destinations/iceberg.md",sourceDirName:"integrations/destinations",slug:"/integrations/destinations/iceberg",permalink:"/integrations/destinations/iceberg",draft:!1,editUrl:"https://github.com/airbytehq/airbyte/blob/master/docs/../docs/integrations/destinations/iceberg.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Google Sheets",permalink:"/integrations/destinations/google-sheets"},next:{title:"Kafka",permalink:"/integrations/destinations/kafka"}},s={},c=[{value:"Sync overview",id:"sync-overview",level:2},{value:"Output schema",id:"output-schema",level:3},{value:"Features",id:"features",level:3},{value:"Performance considerations",id:"performance-considerations",level:3},{value:"Getting started",id:"getting-started",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Changelog",id:"changelog",level:2}],p={toc:c},d="wrapper";function m(e){let{components:t,...a}=e;return(0,r.kt)(d,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"iceberg"},"Iceberg"),(0,r.kt)("p",null,"This page guides you through the process of setting up the Iceberg destination connector."),(0,r.kt)("h2",{id:"sync-overview"},"Sync overview"),(0,r.kt)("h3",{id:"output-schema"},"Output schema"),(0,r.kt)("p",null,"The incoming airbyte data is structured in keyspaces and tables and is partitioned and replicated across different nodes\nin the cluster. This connector maps an incoming ",(0,r.kt)("inlineCode",{parentName:"p"},"stream")," to an Iceberg ",(0,r.kt)("inlineCode",{parentName:"p"},"table")," and a ",(0,r.kt)("inlineCode",{parentName:"p"},"namespace")," to an\nIceberg ",(0,r.kt)("inlineCode",{parentName:"p"},"database"),". Fields in the airbyte message become different columns in the Iceberg tables. Each table will\ncontain the following columns."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_airbyte_ab_id"),": A random generated uuid."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_airbyte_emitted_at"),": a timestamp representing when the event was received from the data source."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_airbyte_data"),": a json text representing the extracted data.")),(0,r.kt)("h3",{id:"features"},"Features"),(0,r.kt)("p",null,"This section should contain a table with the following format:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Feature"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Supported?(Yes/No)"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Full Refresh Sync"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Incremental Sync"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Replicate Incremental Deletes"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"SSH Tunnel Support"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"left"})))),(0,r.kt)("h3",{id:"performance-considerations"},"Performance considerations"),(0,r.kt)("p",null,"Every ten thousand pieces of incoming airbyte data in a stream \u2014\u2014\u2014\u2014we call it a batch, would produce one data file(\nParquet/Avro) in an Iceberg table. This batch size can be configurabled by ",(0,r.kt)("inlineCode",{parentName:"p"},"Data file flushing batch size"),"\nproperty.\nAs the quantity of Iceberg data files grows, it causes an unnecessary amount of metadata and less efficient queries from\nfile open costs.\nIceberg provides data file compaction action to improve this case, you can read more about\ncompaction ",(0,r.kt)("a",{parentName:"p",href:"https://iceberg.apache.org/docs/latest/maintenance/#compact-data-files"},"HERE"),".\nThis connector also provides auto compact action when stream closes, by ",(0,r.kt)("inlineCode",{parentName:"p"},"Auto compact data files")," property. Any you can\nspecify the target size of compacted Iceberg data file."),(0,r.kt)("h2",{id:"getting-started"},"Getting started"),(0,r.kt)("h3",{id:"requirements"},"Requirements"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Iceberg catalog")," : Iceberg uses ",(0,r.kt)("inlineCode",{parentName:"li"},"catalog")," to manage tables. this connector already supports:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://iceberg.apache.org/docs/latest/hive/#global-hive-catalog"},"HiveCatalog")," connects to a ",(0,r.kt)("strong",{parentName:"li"},"Hive metastore"),"\nto keep track of Iceberg tables."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://iceberg.apache.org/docs/latest/java-api-quickstart/#using-a-hadoop-catalog"},"HadoopCatalog")," doesn\u2019t need\nto connect to a Hive MetaStore, but can only be used with ",(0,r.kt)("strong",{parentName:"li"},"HDFS or similar file systems")," that support atomic\nrename. For ",(0,r.kt)("inlineCode",{parentName:"li"},"HadoopCatalog"),", this connector use ",(0,r.kt)("strong",{parentName:"li"},"Storage Config")," (S3 or HDFS) to manage Iceberg tables."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://iceberg.apache.org/docs/latest/jdbc/"},"JdbcCatalog")," uses a table in a relational database to manage\nIceberg tables through JDBC. So far, this connector supports ",(0,r.kt)("strong",{parentName:"li"},"PostgreSQL")," only."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Storage medium")," means where Iceberg data files storages in. So far, this connector supports ",(0,r.kt)("strong",{parentName:"li"},"S3/S3N/S3N"),"\nobject-storage only.")),(0,r.kt)("h2",{id:"changelog"},"Changelog"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Version"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Date"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Pull Request"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Subject"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.1.2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2023-07-14"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/28345"},"28345")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Trigger rebuild of image")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.1.1"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2023-02-27"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/23301"},"23201")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Bump Iceberg library to 1.1.0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.1.0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2022-11-01"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/18836"},"18836")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Initial Commit")))))}m.isMDXComponent=!0},3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>u});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(a),g=r,u=d["".concat(s,".").concat(g)]||d[g]||m[g]||i;return a?n.createElement(u,o(o({ref:t},p),{},{components:a})):n.createElement(u,o({ref:t},p))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=g;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"}}]);