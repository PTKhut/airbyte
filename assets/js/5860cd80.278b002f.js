"use strict";(self.webpackChunkdocu=self.webpackChunkdocu||[]).push([[29e3],{22581:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var a=n(87462),o=(n(67294),n(3905));const r={},l="Gradle Cheatsheet",i={unversionedId:"contributing-to-airbyte/resources/gradle",id:"contributing-to-airbyte/resources/gradle",title:"Gradle Cheatsheet",description:"Overview",source:"@site/../docs/contributing-to-airbyte/resources/gradle.md",sourceDirName:"contributing-to-airbyte/resources",slug:"/contributing-to-airbyte/resources/gradle",permalink:"/contributing-to-airbyte/resources/gradle",draft:!1,editUrl:"https://github.com/airbytehq/airbyte/blob/master/docs/../docs/contributing-to-airbyte/resources/gradle.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Developing on Docker",permalink:"/contributing-to-airbyte/resources/developing-on-docker"},next:{title:"Monorepo Python Development",permalink:"/contributing-to-airbyte/resources/python-gradle-setup"}},s={},c=[{value:"Overview",id:"overview",level:2},{value:"Cheatsheet",id:"cheatsheet",level:2},{value:"List Gradle Tasks",id:"list-gradle-tasks",level:3},{value:"Basic Build Syntax",id:"basic-build-syntax",level:3},{value:"Build Everything",id:"build-everything",level:4},{value:"Build Platform",id:"build-platform",level:4},{value:"Build Connectors Base",id:"build-connectors-base",level:4},{value:"Build CDK",id:"build-cdk",level:4},{value:"Build",id:"build",level:3},{value:"Debugging",id:"debugging",level:3},{value:"Formatting",id:"formatting",level:3},{value:"Platform-Specific Commands",id:"platform-specific-commands",level:3},{value:"Build Artifacts",id:"build-artifacts",level:4},{value:"Running Tests",id:"running-tests",level:4},{value:"Connectors-Specific Commands (Connector Development)",id:"connectors-specific-commands-connector-development",level:3},{value:"Commands used in CI",id:"commands-used-in-ci",level:4},{value:"Python",id:"python",level:4},{value:"Setup Details",id:"setup-details",level:3},{value:"The version catalog TOML file format",id:"the-version-catalog-toml-file-format",level:4},{value:"Declaring a version catalog",id:"declaring-a-version-catalog",level:4},{value:"Sharing Catalogs",id:"sharing-catalogs",level:4},{value:"Configure the Plugin Publishing Plugin",id:"configure-the-plugin-publishing-plugin",level:4}],u={toc:c},d="wrapper";function p(e){let{components:t,...n}=e;return(0,o.kt)(d,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"gradle-cheatsheet"},"Gradle Cheatsheet"),(0,o.kt)("h2",{id:"overview"},"Overview"),(0,o.kt)("p",null,"We have 3 ways of slicing our builds:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Build Everything"),": Including every single connectors."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Build Platform"),": Build only modules related to the core platform."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Build Connectors Base"),": Build only modules related to code infrastructure for connectors.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Build Everything")," is really not particularly functional as building every single connector at once is really prone to transient errors. As there are more connectors the chance that there is a transient issue while downloading any single dependency starts to get really high."),(0,o.kt)("p",null,"In our CI we run ",(0,o.kt)("strong",{parentName:"p"},"Build Platform")," and ",(0,o.kt)("strong",{parentName:"p"},"Build Connectors Base"),". Then separately, on a regular cadence, we build each connector and run its integration tests."),(0,o.kt)("p",null,"We split Build Platform and Build Connectors Base from each other for a few reasons:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"The tech stacks are very different. The Platform is almost entirely Java. Because of differing needs around separating environments, the Platform build can be optimized separately from the Connectors one."),(0,o.kt)("li",{parentName:"ol"},"We want to the iteration cycles of people working on connectors or the platform faster ",(0,o.kt)("em",{parentName:"li"},"and")," independent. e.g. Before this change someone working on a Platform feature needs to run formatting on the entire codebase ","(","including connectors",")",". This led to a lot of cosmetic build failures that obfuscated actually problems. Ideally a failure on the connectors side should not block progress on the platform side."),(0,o.kt)("li",{parentName:"ol"},"The lifecycles are different. One can safely release the Platform even if parts of Connectors Base is failing ","(","and vice versa",")",".")),(0,o.kt)("p",null,"Future Work: The next step here is to figure out how to more formally split connectors and platform. Right now we exploit behavior in ",(0,o.kt)("a",{parentName:"p",href:"../../settings.gradle"},"settings.gradle")," to separate them. This is not a best practice. Ultimately, we want these two builds to be totally separate. We do not know what that will look like yet."),(0,o.kt)("h2",{id:"cheatsheet"},"Cheatsheet"),(0,o.kt)("p",null,"Here is a cheatsheet for common gradle commands."),(0,o.kt)("h3",{id:"list-gradle-tasks"},"List Gradle Tasks"),(0,o.kt)("p",null,"To view all available tasks:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"./gradlew tasks\n")),(0,o.kt)("p",null,"To view all tasks available for a given namespace:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"./gradlew <namespace>:tasks\n")),(0,o.kt)("p",null,"for example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"./gradlew :airbyte-integrations:connectors:source-bigquery:tasks\n")),(0,o.kt)("h3",{id:"basic-build-syntax"},"Basic Build Syntax"),(0,o.kt)("p",null,"Here is the syntax for running gradle commands on the different parts of the code base that we called out above."),(0,o.kt)("h4",{id:"build-everything"},"Build Everything"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"./gradlew <gradle command>\n")),(0,o.kt)("h4",{id:"build-platform"},"Build Platform"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"SUB_BUILD=PLATFORM ./gradlew <gradle command>\n")),(0,o.kt)("h4",{id:"build-connectors-base"},"Build Connectors Base"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"SUB_BUILD=CONNECTORS_BASE ./gradlew <gradle command>\n")),(0,o.kt)("h4",{id:"build-cdk"},"Build CDK"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"SUB_BUILD=CDK ./gradlew <gradle command>\n")),(0,o.kt)("h3",{id:"build"},"Build"),(0,o.kt)("p",null,'In order to "build" the project. This task includes producing all artifacts and running unit tests ',"(","anything called in the ",(0,o.kt)("inlineCode",{parentName:"p"},":test")," task",")",". It does ",(0,o.kt)("em",{parentName:"p"},"not")," include integration tests ","(","anything called in the ",(0,o.kt)("inlineCode",{parentName:"p"},":integrationTest")," task",")","."),(0,o.kt)("p",null,"For example all the following are valid."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew build # builds the entire Airbyte project including every single connector supported\nSUB_BUILD=PLATFORM ./gradlew build -x test # builds Airbyte Platform without running tests\nSUB_BUILD=CONNECTORS_BASE ./gradlew build # builds all Airbyte connectors and runs unit tests\n")),(0,o.kt)("h3",{id:"debugging"},"Debugging"),(0,o.kt)("p",null,"To debug a Gradle task, add ",(0,o.kt)("inlineCode",{parentName:"p"},"--scan")," to the ",(0,o.kt)("inlineCode",{parentName:"p"},"./gradlew")," command. After the task has completed, you should see a message like:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"Publishing build scan...\nhttps://gradle.com/s/6y7ritpvzkwp4\n")),(0,o.kt)("p",null,"Clicking the link opens a browser page which contains lots of information pertinent to debugging why a build failed, or understanding what sub-tasks were run during a task."),(0,o.kt)("h3",{id:"formatting"},"Formatting"),(0,o.kt)("p",null,"The build system has a custom task called ",(0,o.kt)("inlineCode",{parentName:"p"},"format"),". It is not called as part of ",(0,o.kt)("inlineCode",{parentName:"p"},"build"),". If the command is called on a subset of the project, it will ","(","mostly",")"," target just the included modules. The exception is that ",(0,o.kt)("inlineCode",{parentName:"p"},"spotless")," ","(","a gradle formatter",")"," will always format any file types that it is configured to manage regardless of which sub build is run. ",(0,o.kt)("inlineCode",{parentName:"p"},"spotless")," is relatively fast, so this should not be too much of an annoyance. It can lead to formatting changes in unexpected parts of the code base."),(0,o.kt)("p",null,"For example all the following are valid."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew format\nSUB_BUILD=PLATFORM ./gradlew format\nSUB_BUILD=CONNECTORS_BASE ./gradlew format\n")),(0,o.kt)("h3",{id:"platform-specific-commands"},"Platform-Specific Commands"),(0,o.kt)("h4",{id:"build-artifacts"},"Build Artifacts"),(0,o.kt)("p",null,"This command just builds the docker images that are used as artifacts in the platform. It bypasses running tests."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"SUB_BUILD=PLATFORM ./gradlew build\n")),(0,o.kt)("h4",{id:"running-tests"},"Running Tests"),(0,o.kt)("p",null,"The Platform has 3 different levels of tests: Unit Tests, Acceptance Tests, Frontend Acceptance Tests."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"left"},"Test"),(0,o.kt)("th",{parentName:"tr",align:"center"},"Used"),(0,o.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},"Unit"),(0,o.kt)("td",{parentName:"tr",align:"center"},"X"),(0,o.kt)("td",{parentName:"tr",align:"left"},"Aims to test each component (e.g. a method function)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},"Integration"),(0,o.kt)("td",{parentName:"tr",align:"center"}),(0,o.kt)("td",{parentName:"tr",align:"left"},"Checks the data flow from one module to other modules")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},"System"),(0,o.kt)("td",{parentName:"tr",align:"center"}),(0,o.kt)("td",{parentName:"tr",align:"left"},"Tests overall interaction of components, includes load, performance, reliability and security")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},"Acceptance"),(0,o.kt)("td",{parentName:"tr",align:"center"},"X"),(0,o.kt)("td",{parentName:"tr",align:"left"},"Assess whether the Product is working for the user's viewpoint")))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Unit Tests")),(0,o.kt)("p",null,"Unit Tests can be run using the ",(0,o.kt)("inlineCode",{parentName:"p"},":test")," task on any submodule. These test class-level behavior. They should avoid using external resources ","(","e.g. calling staging services or pulling resources from the internet",")",". We do allow these tests to spin up local resources ","(","usually in docker containers",")",". For example, we use test containers frequently to spin up test postgres databases."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Acceptance Tests")),(0,o.kt)("p",null,"We split Acceptance Tests into 2 different test suites:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Platform Acceptance Tests: These tests are a coarse test to sanity check that each major feature in the platform. They are run with the following command: ",(0,o.kt)("inlineCode",{parentName:"li"},"SUB_BUILD=PLATFORM ./gradlew :airbyte-tests:acceptanceTests"),". These tests expect to find a local version of Airbyte running. For testing the docker version start Airbyte locally. For an example, see the ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/airbytehq/airbyte-platform/blob/main/tools/bin/acceptance_test.sh"},"acceptance_test script")," that is used by the CI. For Kubernetes, see the ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/airbytehq/airbyte-platform/blob/main/tools/bin/acceptance_test_kube_helm.sh"},"acceptance_test_helm script")," that is used by the CI."),(0,o.kt)("li",{parentName:"ul"},"Migration Acceptance Tests: These tests make sure the end-to-end process of migrating from one version of Airbyte to the next works. These tests are run with the following command: ",(0,o.kt)("inlineCode",{parentName:"li"},"SUB_BUILD=PLATFORM ./gradlew :airbyte-tests:automaticMigrationAcceptanceTest --scan"),". These tests do not expect there to be a separate deployment of Airbyte running.")),(0,o.kt)("p",null,"These tests currently all live in ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/airbytehq/airbyte/airbyte-tests"},"airbyte-tests")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Frontend Acceptance Tests")),(0,o.kt)("p",null,"These are acceptance tests for the frontend. They are run with"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"SUB_BUILD=PLATFORM ./gradlew --no-daemon :airbyte-webapp-e2e-tests:e2etest\n")),(0,o.kt)("p",null,"Like the Platform Acceptance Tests, they expect Airbyte to be running locally. See the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/airbytehq/airbyte/blob/master/tools/bin/e2e_test.sh"},"script")," that is used by the CI."),(0,o.kt)("p",null,"These tests currently all live in ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/airbytehq/airbyte/airbyte-webapp-e2e-tests"},"airbyte-webapp-e2e-tests")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Future Work")),(0,o.kt)("p",null,'Our story around "integration testing" or "E2E testing" is a little ambiguous. Our Platform Acceptance Test Suite is getting somewhat unwieldy. It was meant to just be some coarse sanity checks, but over time we have found more need to test interactions between systems more granular. Whether we start supporting a separate class of tests ',"(","e.g. integration tests",")"," or figure out how allow for more granular tests in the existing Acceptance Test framework is TBD."),(0,o.kt)("h3",{id:"connectors-specific-commands-connector-development"},"Connectors-Specific Commands ","(","Connector Development",")"),(0,o.kt)("h4",{id:"commands-used-in-ci"},"Commands used in CI"),(0,o.kt)("p",null,"All connectors, regardless of implementation language, implement the following interface to allow uniformity in the build system when run from CI:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Build connector, run unit tests, and build Docker image"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew :airbyte-integrations:connectors:<connector_name>:build\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Run integration tests"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew :airbyte-integrations:connectors:<connector_name>:integrationTest\n")),(0,o.kt)("h4",{id:"python"},"Python"),(0,o.kt)("p",null,"The ideal end state for a Python connector developer is that they shouldn't have to know Gradle exists."),(0,o.kt)("p",null,"We're almost there, but today there is only one Gradle command that's needed when developing in Python, used for formatting code."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Formatting python module"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew :airbyte-integrations:connectors:<connector_name>:airbytePythonFormat\n")),(0,o.kt)("h1",{id:"updating-gradle-dependencies"},"Updating Gradle Dependencies"),(0,o.kt)("p",null,"We use ",(0,o.kt)("a",{parentName:"p",href:"https://docs.gradle.org/current/userguide/platforms.html#sub:central-declaration-of-dependencies"},"Gradle Catalogs"),"\nto keep dependencies synced up across different Java projects. This is particularly useful for Airbyte Cloud, and can be\nused by any project seeking to build off Airbyte."),(0,o.kt)("p",null,"Catalogs allow dependencies to be represented as dependency coordinates. A user can reference preset dependencies/versions\nwhen declaring dependencies in a build script."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Version Catalog Example:"),(0,o.kt)("pre",{parentName:"blockquote"},(0,o.kt)("code",{parentName:"pre",className:"language-gradle"},"dependencies {\n   implementation(libs.groovy.core)\n}\n")),(0,o.kt)("p",{parentName:"blockquote"},"In this context, libs is a catalog and groovy represents a dependency available in this catalog. Instead of declaring a\nspecific version, we reference the version in the Catalog.")),(0,o.kt)("p",null,"This helps reduce the chances of dependency drift and dependency hell."),(0,o.kt)("p",null,"Thus, please use the Catalog when:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"declaring new common dependencies."),(0,o.kt)("li",{parentName:"ul"},"specifying new common dependencies.")),(0,o.kt)("p",null,"A common dependency is a foundational Java package e.g. Apache commons, Log4j etc that is often the basis on which libraries\nare built upon."),(0,o.kt)("p",null,"This is a relatively new addition, so devs should keep this in mind and use the top-level Catalog on a best-effort basis."),(0,o.kt)("h3",{id:"setup-details"},"Setup Details"),(0,o.kt)("p",null,"This section is for engineers wanting to understand Gradle Catalog details and how Airbyte has set this up."),(0,o.kt)("h4",{id:"the-version-catalog-toml-file-format"},"The version catalog TOML file format"),(0,o.kt)("p",null,"Gradle offers a conventional file to declare a catalog.\nIt\u2019s a conventional location to declare dependencies that are both consumed and published."),(0,o.kt)("p",null,"The TOML file consists of 4 major sections:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"the ","[versions]"," section is used to declare versions which can be referenced by dependencies"),(0,o.kt)("li",{parentName:"ul"},"the ","[libraries]"," section is used to declare the aliases to coordinates"),(0,o.kt)("li",{parentName:"ul"},"the ","[bundles]"," section is used to declare dependency bundles"),(0,o.kt)("li",{parentName:"ul"},"the ","[plugins]"," section is used to declare plugins")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"TOML file Example:"),(0,o.kt)("pre",{parentName:"blockquote"},(0,o.kt)("code",{parentName:"pre",className:"language-gradle"},'[versions]\ngroovy = "3.0.5"\n\n[libraries]\ngroovy-core = { module = "org.codehaus.groovy:groovy", version.ref = "groovy" }\n\n[bundles]\ngroovy = ["groovy-core", "groovy-json", "groovy-nio"]\n\n[plugins]\njmh = { id = "me.champeau.jmh", version = "0.6.5" }\n')),(0,o.kt)("p",{parentName:"blockquote"},"NOTE: for more information please follow ",(0,o.kt)("a",{parentName:"p",href:"https://docs.gradle.org/current/userguide/platforms.html#:~:text=The%20version%20catalog%20TOML%20file%20format"},"this")," link.")),(0,o.kt)("p",null,"As described above this project contains TOML file ",(0,o.kt)("inlineCode",{parentName:"p"},"deps.toml")," which is fully fulfilled with respect to ",(0,o.kt)("a",{parentName:"p",href:"https://docs.gradle.org/current/userguide/platforms.html#sub::toml-dependencies-format"},"official")," documentation.\nIn case when new versions should be used please update ",(0,o.kt)("inlineCode",{parentName:"p"},"deps.toml")," accordingly."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"deps.toml"),(0,o.kt)("p",null,"[versions]",'\nfasterxml_version = "2.13.0"\nglassfish_version = "2.31"\ncommons_io = "2.7"\nlog4j = "2.17.1"\nslf4j = "1.7.30"\nlombok = "1.18.22"\njunit-jupiter = "5.8.2"'),(0,o.kt)("p",null,"[libraries]",'\nfasterxml = { module = "com.fasterxml.jackson:jackson-bom", version.ref = "fasterxml_version" }\nglassfish = { module = "org.glassfish.jersey:jackson-bom", version.ref = "glassfish_version" }\njackson-databind = { module = "com.fasterxml.jackson.core:jackson-databind", version.ref = "fasterxml_version" }\njackson-annotations = { module = "com.fasterxml.jackson.core:jackson-annotations", version.ref = "fasterxml_version" }\njackson-dataformat = { module = "com.fasterxml.jackson.dataformat:jackson-dataformat-yaml", version.ref = "fasterxml_version" }\njackson-datatype = { module = "com.fasterxml.jackson.datatype:jackson-datatype-jsr310", version.ref = "fasterxml_version" }\nguava = { module = "com.google.guava:guava", version = "30.1.1-jre" }\ncommons-io = { module = "commons-io:commons-io", version.ref = "commons_io" }\napache-commons = { module = "org.apache.commons:commons-compress", version = "1.20" }\napache-commons-lang = { module = "org.apache.commons:commons-lang3", version = "3.11" }\nslf4j-api = { module = "org.slf4j:slf4j-api", version = "1.7.30" }\nlog4j-api = { module = "org.apache.logging.log4j:log4j-api", version.ref = "log4j" }\nlog4j-core = { module = "org.apache.logging.log4j:log4j-core", version.ref = "log4j" }\nlog4j-impl = { module = "org.apache.logging.log4j:log4j-slf4j-impl", version.ref = "log4j" }\nlog4j-web = { module = "org.apache.logging.log4j:log4j-web", version.ref = "log4j" }\njul-to-slf4j = { module = "org.slf4j:jul-to-slf4j", version.ref = "slf4j" }\njcl-over-slf4j = { module = "org.slf4j:jcl-over-slf4j", version.ref = "slf4j" }\nlog4j-over-slf4j = { module = "org.slf4j:log4j-over-slf4j", version.ref = "slf4j" }\nappender-log4j2 = { module = "com.therealvan:appender-log4j2", version = "3.6.0" }\naws-java-sdk-s3 = { module = "com.amazonaws:aws-java-sdk-s3", version = "1.12.6" }\ngoogle-cloud-storage = { module = "com.google.cloud:google-cloud-storage", version = "2.2.2" }\ns3 = { module = "software.amazon.awssdk:s3", version = "2.16.84" }\nlombok = { module = "org.projectlombok:lombok", version.ref = "lombok" }\njunit-jupiter-engine = { module = "org.junit.jupiter:junit-jupiter-engine", version.ref = "junit-jupiter" }\njunit-jupiter-api = { module = "org.junit.jupiter:junit-jupiter-api", version.ref = "junit-jupiter" }\njunit-jupiter-params = { module = "org.junit.jupiter:junit-jupiter-params", version.ref = "junit-jupiter" }\nmockito-junit-jupiter = { module = "org.mockito:mockito-junit-jupiter", version = "4.0.0" }\nassertj-core = { module = "org.assertj:assertj-core", version = "3.21.0" }\njunit-pioneer = { module = "org.junit-pioneer:junit-pioneer", version = "1.6.2" }\nfindsecbugs-plugin = { module = "com.h3xstream.findsecbugs:findsecbugs-plugin", version = "1.11.0" }'),(0,o.kt)("p",null,"[bundles]","\njackson = ",'["jackson-databind", "jackson-annotations", "jackson-dataformat", "jackson-datatype"]',"\napache = ",'["apache-commons", "apache-commons-lang"]',"\nlog4j = ",'["log4j-api", "log4j-core", "log4j-impl", "log4j-web"]',"\nslf4j = ",'["jul-to-slf4j", "jcl-over-slf4j", "log4j-over-slf4j"]',"\njunit = ",'["junit-jupiter-api", "junit-jupiter-params", "mockito-junit-jupiter"]')),(0,o.kt)("h4",{id:"declaring-a-version-catalog"},"Declaring a version catalog"),(0,o.kt)("p",null,"Version catalogs can be declared in the settings.gradle file.\nThere should be specified section ",(0,o.kt)("inlineCode",{parentName:"p"},"dependencyResolutionManagement")," which uses ",(0,o.kt)("inlineCode",{parentName:"p"},"deps.toml")," file as a declared catalog."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Example:"),(0,o.kt)("pre",{parentName:"blockquote"},(0,o.kt)("code",{parentName:"pre",className:"language-gradle"},"dependencyResolutionManagement {\n    repositories {\n        maven {\n            url 'https://airbyte.mycloudrepo.io/public/repositories/airbyte-public-jars/'\n       }\n    }\n    versionCatalogs {\n        libs {\n            from(files(\"deps.toml\"))\n        }\n    }\n}\n"))),(0,o.kt)("h4",{id:"sharing-catalogs"},"Sharing Catalogs"),(0,o.kt)("p",null,"To share this catalog for further usage by other Projects, we do the following 2 steps:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Define ",(0,o.kt)("inlineCode",{parentName:"li"},"version-catalog")," plugin in ",(0,o.kt)("inlineCode",{parentName:"li"},"build.gradle")," file (ignore if this record exists)",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-gradle"},"plugins {\n    id '...'\n    id 'version-catalog'\n"))),(0,o.kt)("li",{parentName:"ul"},"Prepare Catalog for Publishing",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-gradle"},'catalog {\n    versionCatalog {\n        from(files("deps.toml")) < --- declere either dependencies or specify existing TOML file\n    }\n}\n')))),(0,o.kt)("h4",{id:"configure-the-plugin-publishing-plugin"},"Configure the Plugin Publishing Plugin"),(0,o.kt)("p",null,"To ",(0,o.kt)("strong",{parentName:"p"},"Publishing"),", first define the ",(0,o.kt)("inlineCode",{parentName:"p"},"maven-publish")," plugin in ",(0,o.kt)("inlineCode",{parentName:"p"},"build.gradle")," file (ignore if this already exists):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-gradle"},"plugins {\n    id '...'\n    id 'maven-publish'\n}\n")),(0,o.kt)("p",null,"After that, describe the publishing section. Please use ",(0,o.kt)("a",{parentName:"p",href:"https://docs.gradle.org/current/userguide/publishing_gradle_plugins.html"},"this")," official documentation for more details."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Example:"),(0,o.kt)("pre",{parentName:"blockquote"},(0,o.kt)("code",{parentName:"pre",className:"language-gradle"},"publishing {\n    publications {\n        maven(MavenPublication) {\n            groupId = 'io.airbyte'\n            artifactId = 'oss-catalog'\n\n                from components.versionCatalog\n        }\n    }\n\n    repositories {\n        maven {\n            url 'https://airbyte.mycloudrepo.io/repositories/airbyte-public-jars'\n            credentials {\n                name 'cloudrepo'\n                username System.getenv('CLOUDREPO_USER')\n                password System.getenv('CLOUDREPO_PASSWORD')\n            }\n        }\n\n        mavenLocal()\n    }\n}\n"))))}p.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=c(n),m=o,g=d["".concat(s,".").concat(m)]||d[m]||p[m]||r;return n?a.createElement(g,l(l({ref:t},u),{},{components:n})):a.createElement(g,l({ref:t},u))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:o,l[1]=i;for(var c=2;c<r;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);