"use strict";(self.webpackChunkdocu=self.webpackChunkdocu||[]).push([[31017],{44555:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var r=n(87462),a=(n(67294),n(3905));const i={description:"Using the Kestra Plugin to Orchestrate Airbyte"},o="Using the Kestra Plugin",s={unversionedId:"operator-guides/using-kestra-plugin",id:"operator-guides/using-kestra-plugin",title:"Using the Kestra Plugin",description:"Using the Kestra Plugin to Orchestrate Airbyte",source:"@site/../docs/operator-guides/using-kestra-plugin.md",sourceDirName:"operator-guides",slug:"/operator-guides/using-kestra-plugin",permalink:"/operator-guides/using-kestra-plugin",draft:!1,editUrl:"https://github.com/airbytehq/airbyte/blob/master/docs/../docs/operator-guides/using-kestra-plugin.md",tags:[],version:"current",frontMatter:{description:"Using the Kestra Plugin to Orchestrate Airbyte"},sidebar:"mySidebar",previous:{title:"Using the Dagster Integration",permalink:"/operator-guides/using-dagster-integration"},next:{title:"Windows - Browsing Local File Output",permalink:"/operator-guides/locating-files-local-destination"}},l={},p=[{value:"Available tasks",id:"available-tasks",level:2},{value:"<strong>1. Set up the tools</strong>",id:"1-set-up-the-tools",level:2},{value:"Start Airbyte",id:"start-airbyte",level:3},{value:"Install Kestra",id:"install-kestra",level:3},{value:"2. Create a flow from the UI",id:"2-create-a-flow-from-the-ui",level:2},{value:"3. Simple demo",id:"3-simple-demo",level:2},{value:"Next steps",id:"next-steps",level:2}],u={toc:p},c="wrapper";function d(e){let{components:t,...i}=e;return(0,a.kt)(c,(0,r.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"using-the-kestra-plugin"},"Using the Kestra Plugin"),(0,a.kt)("p",null,"Kestra has an official plugin for Airbyte, including support for self-hosted Airbyte and Airbyte Cloud. This plugin allows you to trigger data replication jobs (",(0,a.kt)("inlineCode",{parentName:"p"},"Syncs"),") and wait for their completion before proceeding with any downstream tasks. Alternatively, you may also run those syncs in a fire-and-forget way by setting the ",(0,a.kt)("inlineCode",{parentName:"p"},"wait")," argument to ",(0,a.kt)("inlineCode",{parentName:"p"},"false"),". "),(0,a.kt)("p",null,"After Airbyte tasks successfully ingest raw data, you can easily start running downstream data transformations with dbt, Python, SQL, Spark, and many more, using a variety of available plugins. Check the ",(0,a.kt)("a",{parentName:"p",href:"https://kestra.io/plugins/"},"plugin documentation")," for a list of all supported integrations. "),(0,a.kt)("h2",{id:"available-tasks"},"Available tasks"),(0,a.kt)("p",null,"These are the two main tasks to orchestrate Airbyte syncs:"),(0,a.kt)("p",null,"1) The ",(0,a.kt)("inlineCode",{parentName:"p"},"io.kestra.plugin.airbyte.connections.Sync")," task will sync connections for a self-hosted Airbyte instance"),(0,a.kt)("p",null,"2) The ",(0,a.kt)("inlineCode",{parentName:"p"},"io.kestra.plugin.airbyte.cloud.jobs.Sync")," task will sync connections for Airbyte Cloud "),(0,a.kt)("h2",{id:"1-set-up-the-tools"},(0,a.kt)("strong",{parentName:"h2"},"1. Set up the tools")),(0,a.kt)("p",null,"First, make sure you have Docker installed. We'll be using the\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"docker-compose"),"\xa0command, so your installation should contain\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"docker-compose"),". When you use ",(0,a.kt)("a",{parentName:"p",href:"https://docs.docker.com/compose/install/#scenario-one-install-docker-desktop"},"Docker Desktop"),", Docker Compose is already included."),(0,a.kt)("h3",{id:"start-airbyte"},"Start Airbyte"),(0,a.kt)("p",null,"If this is your first time using Airbyte, we suggest following the\xa0",(0,a.kt)("a",{parentName:"p",href:"https://github.com/airbytehq/airbyte/tree/e378d40236b6a34e1c1cb481c8952735ec687d88/docs/quickstart/getting-started.md"},"Quickstart Guide"),". When creating Airbyte connections intended to be orchestrated with Kestra, set your Connection's\xa0",(0,a.kt)("strong",{parentName:"p"},"sync frequency"),"\xa0to\xa0",(0,a.kt)("strong",{parentName:"p"},"manual"),". Kestra will automate triggering Airbyte jobs in response to external events or based on a schedule you\u2019ll provide."),(0,a.kt)("h3",{id:"install-kestra"},"Install Kestra"),(0,a.kt)("p",null,"If you haven\u2019t started Kestra yet, download ",(0,a.kt)("a",{parentName:"p",href:"https://raw.githubusercontent.com/kestra-io/kestra/develop/docker-compose.yml"},"the Docker Compose file"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"curl -o docker-compose.yml https://raw.githubusercontent.com/kestra-io/kestra/develop/docker-compose.yml\n")),(0,a.kt)("p",null,"Then, run\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"docker compose up -d"),"\xa0and\xa0",(0,a.kt)("a",{parentName:"p",href:"http://localhost:8080/"},"navigate to the UI"),". You can start\xa0",(0,a.kt)("a",{parentName:"p",href:"https://kestra.io/docs/getting-started"},"building your first flows"),"\xa0using the integrated code editor in the UI."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"airbyte_kestra_CLI",src:n(58336).Z,width:"1440",height:"1080"})),(0,a.kt)("h2",{id:"2-create-a-flow-from-the-ui"},"2. Create a flow from the UI"),(0,a.kt)("p",null,"Kestra UI provides a wide range of Blueprints to help you get started. "),(0,a.kt)("p",null,'Navigate to Blueprints. Then type "Airbyte" in the search bar to find the desired integration. This way, you can easily accomplish fairly standardized data orchestration tasks, such as the following:'),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"https://demo.kestra.io/ui/blueprints/community/61"},"Run a single Airbyte sync")," on a schedule"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"https://demo.kestra.io/ui/blueprints/community/18"},"Run multiple Airbyte syncs in parallel")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"https://demo.kestra.io/ui/blueprints/community/30"},"Run multiple Airbyte syncs in parallel, then clone a Git repository with dbt code and trigger dbt CLI commands")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"https://demo.kestra.io/ui/blueprints/community/62"},"Run a single Airbyte Cloud sync")," on a schedule"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"https://demo.kestra.io/ui/blueprints/community/63"},"Run multiple Airbyte Cloud syncs in parallel")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"https://demo.kestra.io/ui/blueprints/community/64"},"Run multiple Airbyte Cloud syncs in parallel, then clone a Git repository with dbt code and trigger dbt CLI commands")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"https://demo.kestra.io/ui/blueprints/community/31"},"Run multiple Airbyte Cloud syncs in parallel, then run a dbt Cloud job"))),(0,a.kt)("p",null,'Select a blueprint matching your use case and click "Use".'),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"airbyte_kestra_UI",src:n(61959).Z,width:"1440",height:"1080"})),(0,a.kt)("p",null,'Then, within the editor, adjust the connection ID and task names and click "Save". Finally, trigger your flow. '),(0,a.kt)("h2",{id:"3-simple-demo"},"3. Simple demo"),(0,a.kt)("p",null,"Here is an example flow that triggers multiple Airbyte connections in parallel to sync data for multiple ",(0,a.kt)("strong",{parentName:"p"},"Pok\xe9mon"),". "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'id: airbyteSyncs\nnamespace: dev\ndescription: Gotta catch \u2018em all!\n\ntasks:\n  - id: data-ingestion\n    type: io.kestra.core.tasks.flows.Parallel\n    tasks:\n      - id: charizard\n        type: io.kestra.plugin.airbyte.connections.Sync\n        connectionId: 9bb96539-73e7-4b9a-9937-6ce861b49cb9\n      - id: pikachu\n        type: io.kestra.plugin.airbyte.connections.Sync\n        connectionId: 39c38950-b0b9-4fce-a303-06ced3dbfa75\n      - id: psyduck\n        type: io.kestra.plugin.airbyte.connections.Sync\n        connectionId: 4de8ab1e-50ef-4df0-aa01-7f21491081f1\n\ntaskDefaults:\n  - type: io.kestra.plugin.airbyte.connections.Sync\n    values:\n      url: http://host.docker.internal:8000/\n      username: "{{envs.airbyte_username}}"\n      password: "{{envs.airbyte_password}}"\n\ntriggers:\n  - id: everyMinute\n    type: io.kestra.core.models.triggers.types.Schedule\n    cron: "*/1 * * * *"      \n')),(0,a.kt)("h2",{id:"next-steps"},"Next steps"),(0,a.kt)("p",null,"If you liked that demo, check out ",(0,a.kt)("a",{parentName:"p",href:"https://airbyte.com/blog/everything-as-code-for-data-infrastructure-with-airbyte-and-kestra-terraform-providers"},"the blog post")," about using Airbyte and Kestra Terraform providers together to manage Everything as Code."),(0,a.kt)("p",null,"If you encounter anything unexpected while reproducing this tutorial, you can open\xa0",(0,a.kt)("a",{parentName:"p",href:"https://github.com/kestra-io/kestra"},"a GitHub issue"),"\xa0or\xa0",(0,a.kt)("a",{parentName:"p",href:"https://kestra.io/slack"},"ask via Kestra Community Slack"),". Lastly, give Kestra ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/kestra-io/kestra"},"a GitHub star"),"\xa0if you like the project."))}d.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>y});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(n),m=a,y=c["".concat(l,".").concat(m)]||c[m]||d[m]||i;return n?r.createElement(y,o(o({ref:t},u),{},{components:n})):r.createElement(y,o({ref:t},u))}));function y(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:a,o[1]=s;for(var p=2;p<i;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},58336:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/airbyte_kestra_1-1843d65a35bbe96c6cf4579175426fa7.gif"},61959:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/airbyte_kestra_2-e384442c44deb5907eec9ddf72c3f239.gif"}}]);